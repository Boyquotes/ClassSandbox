[gd_scene load_steps=6 format=2]

[ext_resource path="res://prefabs/stats/CharacterStats.tscn" type="PackedScene" id=1]
[ext_resource path="res://scripts/actors/MovementController.gd" type="Script" id=2]
[ext_resource path="res://scripts/actors/CameraController.gd" type="Script" id=3]
[ext_resource path="res://scripts/actors/Character.gd" type="Script" id=4]

[sub_resource type="CylinderShape" id=1]
height = 1.8
radius = 0.6

[node name="Player" type="Spatial"]
script = ExtResource( 2 )
controlled_body = NodePath("Character")
is_sprint_toggle = true
is_crouch_toggle = true

[node name="CharacterStats" parent="." instance=ExtResource( 1 )]

[node name="CameraRoot" type="Spatial" parent="."]
script = ExtResource( 3 )
controller = NodePath("..")
follow_target = NodePath("../Character/FollowTarget")

[node name="FollowCamera" type="Camera" parent="CameraRoot"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 5 )

[node name="Character" type="KinematicBody" parent="."]
script = ExtResource( 4 )

[node name="Collider" type="CollisionShape" parent="Character"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.9, 0 )
shape = SubResource( 1 )

[node name="FollowTarget" type="Spatial" parent="Character"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.4, 0 )

[node name="Avatar" type="CSGCylinder" parent="Character"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 0.5, 0, 0.9, 0 )
radius = 0.6
height = 1.8

[node name="Nose" type="CSGSphere" parent="Character/Avatar"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.5, -0.6 )
radius = 0.2

[connection signal="sprinted" from="." to="CharacterStats/Stamina" method="on_drain"]
[connection signal="emptied" from="CharacterStats/Stamina" to="." method="on_sprint" binds= [ true ]]

[editable path="CharacterStats"]
